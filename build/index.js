(()=>{"use strict";var e,s={49:(e,s,r)=>{const t=window.wp.i18n,n=window.wp.element,a=window.wp.components,o=window.ReactJSXRuntime,d=({settings:e,onToggleChange:s,isSaving:r,strings:n})=>(0,o.jsxs)(a.Card,{children:[(0,o.jsx)(a.CardHeader,{children:(0,o.jsx)("h2",{children:(0,t.__)("General Settings","wordpress-mcp")})}),(0,o.jsxs)(a.CardBody,{children:[(0,o.jsx)("div",{className:"setting-row",children:(0,o.jsx)(a.ToggleControl,{label:n.enableMcp||(0,t.__)("Enable MCP functionality","wordpress-mcp"),help:n.enableMcpDescription||(0,t.__)("Toggle to enable or disable the MCP plugin functionality.","wordpress-mcp"),checked:e.enabled,onChange:()=>s("enabled")})}),(0,o.jsx)("div",{className:"setting-row",children:(0,o.jsx)(a.ToggleControl,{label:n.enableFeaturesAdapter||(0,t.__)("Enable WordPress Features Adapter","wordpress-mcp"),help:n.enableFeaturesAdapterDescription||(0,t.__)("Enable or disable the WordPress Features Adapter. This option only works when MCP is enabled.","wordpress-mcp"),checked:e.features_adapter_enabled,onChange:()=>s("features_adapter_enabled"),disabled:!e.enabled})})]}),r&&(0,o.jsx)(a.CardFooter,{children:(0,o.jsxs)("div",{className:"settings-saving-indicator",children:[(0,o.jsx)(a.Spinner,{}),(0,t.__)("Saving...","wordpress-mcp")]})})]}),c=window.wp.apiFetch;var i=r.n(c);const l=()=>{const[e,s]=(0,n.useState)([]),[r,d]=(0,n.useState)(!0),[c,l]=(0,n.useState)(null);return(0,n.useEffect)((()=>{(async()=>{try{d(!0);const e=await i()({path:"/wp/v2/wpmcp",method:"POST",data:{jsonrpc:"2.0",method:"tools/list",params:{}}});e&&e.tools?s(e.tools):l((0,t.__)("Failed to load tools data","wordpress-mcp"))}catch(e){l((0,t.__)("Error loading tools: ","wordpress-mcp")+e.message)}finally{d(!1)}})()}),[]),(0,o.jsxs)(a.Card,{children:[(0,o.jsx)(a.CardHeader,{children:(0,o.jsx)("h2",{children:(0,t.__)("Registered Tools","wordpress-mcp")})}),(0,o.jsxs)(a.CardBody,{children:[(0,o.jsx)("p",{children:(0,t.__)("List of all registered tools in the system.","wordpress-mcp")}),r?(0,o.jsxs)("div",{className:"wordpress-mcp-loading",children:[(0,o.jsx)(a.Spinner,{}),(0,o.jsx)("p",{children:(0,t.__)("Loading tools...","wordpress-mcp")})]}):c?(0,o.jsx)("div",{className:"wordpress-mcp-error",children:(0,o.jsx)("p",{children:c})}):0===e.length?(0,o.jsx)("p",{children:(0,t.__)("No tools are currently registered.","wordpress-mcp")}):(0,o.jsxs)("table",{className:"wordpress-mcp-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,t.__)("Name","wordpress-mcp")}),(0,o.jsx)("th",{children:(0,t.__)("Description","wordpress-mcp")})]})}),(0,o.jsx)("tbody",{children:e.map((e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.name})}),(0,o.jsx)("td",{children:e.description})]},e.name)))})]})]})]})},p=e=>{try{if("string"==typeof e)try{const s=JSON.parse(e);return JSON.stringify(s,null,2)}catch(s){return e}if(e&&"object"==typeof e&&e.text&&"string"==typeof e.text)try{const s=JSON.parse(e.text);return JSON.stringify(s,null,2)}catch(e){}return JSON.stringify(e,null,2)}catch(e){return"Error formatting JSON: "+e.message}},m=()=>{const[e,s]=(0,n.useState)([]),[r,d]=(0,n.useState)(!0),[c,l]=(0,n.useState)(null),[m,h]=(0,n.useState)(null),[u,w]=(0,n.useState)(null),[j,x]=(0,n.useState)(!1),[g,_]=(0,n.useState)(null),[b,v]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async()=>{try{d(!0);const e=await i()({path:"/wp/v2/wpmcp",method:"POST",data:{jsonrpc:"2.0",method:"resources/list",params:{}}});e&&e.resources?s(e.resources):l((0,t.__)("Failed to load resources data","wordpress-mcp"))}catch(e){l((0,t.__)("Error loading resources: ","wordpress-mcp")+e.message)}finally{d(!1)}})()}),[]);return(0,o.jsxs)(a.Card,{children:[(0,o.jsx)(a.CardHeader,{children:(0,o.jsx)("h2",{children:(0,t.__)("Available Resources","wordpress-mcp")})}),(0,o.jsxs)(a.CardBody,{children:[(0,o.jsx)("p",{children:(0,t.__)("List of all available resources in the system.","wordpress-mcp")}),r?(0,o.jsxs)("div",{className:"wordpress-mcp-loading",children:[(0,o.jsx)(a.Spinner,{}),(0,o.jsx)("p",{children:(0,t.__)("Loading resources...","wordpress-mcp")})]}):c?(0,o.jsx)("div",{className:"wordpress-mcp-error",children:(0,o.jsx)("p",{children:c})}):0===e.length?(0,o.jsx)("p",{children:(0,t.__)("No resources are currently available.","wordpress-mcp")}):(0,o.jsxs)("table",{className:"wordpress-mcp-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,t.__)("Name","wordpress-mcp")}),(0,o.jsx)("th",{children:(0,t.__)("URI","wordpress-mcp")}),(0,o.jsx)("th",{children:(0,t.__)("Description","wordpress-mcp")}),(0,o.jsx)("th",{children:(0,t.__)("Actions","wordpress-mcp")})]})}),(0,o.jsx)("tbody",{children:e.map((e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.name})}),(0,o.jsx)("td",{children:e.uri}),(0,o.jsx)("td",{children:e.description||"-"}),(0,o.jsx)("td",{children:(0,o.jsx)(a.Button,{variant:"secondary",onClick:()=>(e=>{h(e),(async e=>{try{x(!0),_(null),v(null);const s=await i()({path:"/wp/v2/wpmcp",method:"POST",data:{jsonrpc:"2.0",method:"resources/read",uri:e.uri}});if(s&&s.contents){if(w(s.contents),s.contents.text&&"string"==typeof s.contents.text)try{const e=JSON.parse(s.contents.text);v(e)}catch(e){console.log("Failed to parse JSON text:",e)}}else _((0,t.__)("Failed to load resource details","wordpress-mcp"))}catch(e){_((0,t.__)("Error loading resource details: ","wordpress-mcp")+e.message)}finally{x(!1)}})(e)})(e),children:(0,t.__)("View","wordpress-mcp")})})]},e.name)))})]}),m&&(0,o.jsx)(a.Modal,{title:(0,t.__)("Resource Details","wordpress-mcp"),onRequestClose:()=>{h(null),w(null),v(null),_(null)},className:"wordpress-mcp-resource-modal",children:j?(0,o.jsxs)("div",{className:"wordpress-mcp-loading",children:[(0,o.jsx)(a.Spinner,{}),(0,o.jsx)("p",{children:(0,t.__)("Loading resource details...","wordpress-mcp")})]}):g?(0,o.jsx)("div",{className:"wordpress-mcp-error",children:(0,o.jsx)("p",{children:g})}):u?(0,o.jsxs)("div",{className:"wordpress-mcp-resource-details",children:[(0,o.jsx)("h3",{children:u.name||m.name}),(0,o.jsxs)("div",{className:"wordpress-mcp-resource-json",children:[(0,o.jsx)("h4",{children:(0,t.__)("Full Resource Data","wordpress-mcp")}),(0,o.jsx)("pre",{className:"wordpress-mcp-json-display",children:p(u)})]})]}):(0,o.jsx)("p",{children:(0,t.__)("No details available for this resource.","wordpress-mcp")})})]})]})},h=()=>{const[e,s]=(0,n.useState)([]),[r,d]=(0,n.useState)(!0),[c,l]=(0,n.useState)(null),[p,m]=(0,n.useState)(null),[h,u]=(0,n.useState)(!1),[w,j]=(0,n.useState)(!1),[x,g]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async()=>{try{d(!0);const e=await i()({path:"/wp/v2/wpmcp",method:"POST",data:{jsonrpc:"2.0",method:"prompts/list",params:{}}});e&&e.prompts?s(e.prompts):l((0,t.__)("Failed to load prompts data","wordpress-mcp"))}catch(e){l((0,t.__)("Error loading prompts: ","wordpress-mcp")+e.message)}finally{d(!1)}})()}),[]);const _=()=>{u(!1),m(null),g(null)};return(0,o.jsxs)(a.Card,{children:[(0,o.jsx)(a.CardHeader,{children:(0,o.jsx)("h2",{children:(0,t.__)("Available Prompts","wordpress-mcp")})}),(0,o.jsxs)(a.CardBody,{children:[(0,o.jsx)("p",{children:(0,t.__)("List of all available prompts in the system.","wordpress-mcp")}),r?(0,o.jsxs)("div",{className:"wordpress-mcp-loading",children:[(0,o.jsx)(a.Spinner,{}),(0,o.jsx)("p",{children:(0,t.__)("Loading prompts...","wordpress-mcp")})]}):c?(0,o.jsx)("div",{className:"wordpress-mcp-error",children:(0,o.jsx)("p",{children:c})}):0===e.length?(0,o.jsx)("p",{children:(0,t.__)("No prompts are currently available.","wordpress-mcp")}):(0,o.jsxs)("table",{className:"wordpress-mcp-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,t.__)("Name","wordpress-mcp")}),(0,o.jsx)("th",{children:(0,t.__)("Description","wordpress-mcp")}),(0,o.jsx)("th",{children:(0,t.__)("Actions","wordpress-mcp")})]})}),(0,o.jsx)("tbody",{children:e.map((e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:e.name})}),(0,o.jsx)("td",{children:e.description||"-"}),(0,o.jsx)("td",{children:(0,o.jsx)(a.Button,{variant:"secondary",onClick:()=>(async e=>{try{j(!0),g(null);const s=await i()({path:"/wp/v2/wpmcp",method:"POST",data:{jsonrpc:"2.0",method:"prompts/get",name:e.name}});if(s&&(s.description||s.messages)){const r={name:e.name,description:s.description||"",content:s.messages&&s.messages.length>0&&s.messages[0].content.text||"",parameters:s.parameters||{}};m(r),u(!0),console.log("Setting showPromptDetails to true",r)}else g((0,t.__)("Failed to load prompt details","wordpress-mcp"))}catch(e){g((0,t.__)("Error loading prompt details: ","wordpress-mcp")+e.message)}finally{j(!1)}})(e),children:(0,t.__)("View","wordpress-mcp")})})]},e.id)))})]}),h&&(0,o.jsxs)(a.Modal,{title:p?p.name:(0,t.__)("Prompt Details","wordpress-mcp"),onRequestClose:_,className:"wordpress-mcp-prompt-modal",children:[w?(0,o.jsxs)("div",{className:"wordpress-mcp-loading",children:[(0,o.jsx)(a.Spinner,{}),(0,o.jsx)("p",{children:(0,t.__)("Loading prompt details...","wordpress-mcp")})]}):x?(0,o.jsx)("div",{className:"wordpress-mcp-error",children:(0,o.jsx)("p",{children:x})}):p?(0,o.jsxs)("div",{className:"wordpress-mcp-prompt-details-content",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:(0,t.__)("Description:","wordpress-mcp")})," ",p.description||(0,t.__)("No description available","wordpress-mcp")]}),p.content&&(0,o.jsxs)("div",{className:"wordpress-mcp-prompt-content",children:[(0,o.jsx)("strong",{children:(0,t.__)("Content:","wordpress-mcp")}),(0,o.jsx)("div",{children:p.content})]}),p.parameters&&(0,o.jsxs)("div",{className:"wordpress-mcp-prompt-parameters",children:[(0,o.jsx)("strong",{children:(0,t.__)("Parameters:","wordpress-mcp")}),(0,o.jsx)("pre",{children:JSON.stringify(p.parameters,null,2)})]})]}):null,(0,o.jsx)("div",{className:"wordpress-mcp-modal-footer",children:(0,o.jsx)(a.Button,{variant:"primary",onClick:_,children:(0,t.__)("Close","wordpress-mcp")})})]})]})]})},u=()=>{const[e,s]=(0,n.useState)({enabled:!1,features_adapter_enabled:!1}),[r,c]=(0,n.useState)(!1),[i,p]=(0,n.useState)(null),[u,w]=(0,n.useState)("settings"),j=(0,n.useRef)(null);(0,n.useEffect)((()=>{window.wordpressMcpSettings&&window.wordpressMcpSettings.settings&&s(window.wordpressMcpSettings.settings)}),[]),(0,n.useEffect)((()=>()=>{j.current&&clearTimeout(j.current)}),[]);const x=r=>{const t=!e[r];s((e=>{const s={...e,[r]:t};return"enabled"!==r||t||"settings"===u||w("settings"),j.current&&clearTimeout(j.current),j.current=setTimeout((()=>{g(s),j.current=null}),500),s}))},g=e=>{c(!0),p(null);const s=new FormData;s.append("action","wordpress_mcp_save_settings"),s.append("nonce",window.wordpressMcpSettings.nonce),s.append("settings",JSON.stringify(e)),fetch(ajaxurl,{method:"POST",body:s,credentials:"same-origin"}).then((e=>e.json())).then((e=>{c(!1),e.success?p({status:"success",message:e.data.message||window.wordpressMcpSettings.strings.settingsSaved}):p({status:"error",message:e.data.message||window.wordpressMcpSettings.strings.settingsError})})).catch((e=>{c(!1),p({status:"error",message:window.wordpressMcpSettings.strings.settingsError}),console.error("Error saving settings:",e)}))},_=window.wordpressMcpSettings?window.wordpressMcpSettings.strings:{},b=[{name:"settings",title:(0,t.__)("Settings","wordpress-mcp"),className:"wordpress-mcp-settings-tab"},{name:"tools",title:(0,t.__)("Tools","wordpress-mcp"),className:"wordpress-mcp-tools-tab",disabled:!e.enabled},{name:"resources",title:(0,t.__)("Resources","wordpress-mcp"),className:"wordpress-mcp-resources-tab",disabled:!e.enabled},{name:"prompts",title:(0,t.__)("Prompts","wordpress-mcp"),className:"wordpress-mcp-prompts-tab",disabled:!e.enabled}];return(0,o.jsxs)("div",{className:"wordpress-mcp-settings",children:[i&&(0,o.jsx)(a.Notice,{status:i.status,isDismissible:!0,onRemove:()=>p(null),className:`notice notice-${i.status} is-dismissible`,children:i.message}),(0,o.jsx)(a.TabPanel,{className:"wordpress-mcp-tabs",tabs:b,activeClass:"is-active",initialTabName:u,onSelect:e=>b.find((s=>s.name===e)).disabled?u:(w(e),e),children:s=>{if(s.disabled)return(0,o.jsxs)("div",{className:"wordpress-mcp-disabled-tab-notice",children:[(0,o.jsx)("p",{children:(0,t.__)("This feature is only available when MCP functionality is enabled.","wordpress-mcp")}),(0,o.jsx)("p",{children:(0,t.__)("Please enable MCP in the Settings tab first.","wordpress-mcp")})]});switch(s.name){case"settings":return(0,o.jsx)(d,{settings:e,onToggleChange:x,isSaving:r,strings:_});case"tools":return(0,o.jsx)(l,{});case"resources":return(0,o.jsx)(m,{});case"prompts":return(0,o.jsx)(h,{});default:return null}}})]})};document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("wordpress-mcp-settings-app");e&&(0,n.createRoot)(e).render((0,o.jsx)(u,{}))}))}},r={};function t(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return s[e](a,a.exports,t),a.exports}t.m=s,e=[],t.O=(s,r,n,a)=>{if(!r){var o=1/0;for(l=0;l<e.length;l++){for(var[r,n,a]=e[l],d=!0,c=0;c<r.length;c++)(!1&a||o>=a)&&Object.keys(t.O).every((e=>t.O[e](r[c])))?r.splice(c--,1):(d=!1,a<o&&(o=a));if(d){e.splice(l--,1);var i=n();void 0!==i&&(s=i)}}return s}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[r,n,a]},t.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return t.d(s,{a:s}),s},t.d=(e,s)=>{for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={57:0,350:0};t.O.j=s=>0===e[s];var s=(s,r)=>{var n,a,[o,d,c]=r,i=0;if(o.some((s=>0!==e[s]))){for(n in d)t.o(d,n)&&(t.m[n]=d[n]);if(c)var l=c(t)}for(s&&s(r);i<o.length;i++)a=o[i],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(l)},r=globalThis.webpackChunkwordpress_mcp=globalThis.webpackChunkwordpress_mcp||[];r.forEach(s.bind(null,0)),r.push=s.bind(null,r.push.bind(r))})();var n=t.O(void 0,[350],(()=>t(49)));n=t.O(n)})();