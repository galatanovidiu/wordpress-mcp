(()=>{"use strict";var s,e={49:(s,e,r)=>{const t=window.wp.i18n,n=window.wp.element,a=window.wp.components,o=window.ReactJSXRuntime,d=({settings:s,onToggleChange:e,onSaveSettings:r,isSaving:n,strings:d})=>(0,o.jsxs)(a.Card,{children:[(0,o.jsx)(a.CardHeader,{children:(0,o.jsx)("h2",{children:(0,t.__)("General Settings","wordpress-mcp")})}),(0,o.jsxs)(a.CardBody,{children:[(0,o.jsx)("div",{className:"setting-row",children:(0,o.jsx)(a.ToggleControl,{label:d.enableMcp||(0,t.__)("Enable MCP functionality","wordpress-mcp"),help:d.enableMcpDescription||(0,t.__)("Toggle to enable or disable the MCP plugin functionality.","wordpress-mcp"),checked:s.enabled,onChange:()=>e("enabled")})}),(0,o.jsx)("div",{className:"setting-row",children:(0,o.jsx)(a.ToggleControl,{label:d.enableFeaturesAdapter||(0,t.__)("Enable WordPress Features Adapter","wordpress-mcp"),help:d.enableFeaturesAdapterDescription||(0,t.__)("Enable or disable the WordPress Features Adapter. This option only works when MCP is enabled.","wordpress-mcp"),checked:s.features_adapter_enabled,onChange:()=>e("features_adapter_enabled"),disabled:!s.enabled})})]}),(0,o.jsx)(a.CardFooter,{children:(0,o.jsx)(a.Button,{variant:"primary",onClick:r,isBusy:n,disabled:n,className:"button button-primary",children:n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Spinner,{}),(0,t.__)("Saving...","wordpress-mcp")]}):d.saveSettings||(0,t.__)("Save Settings","wordpress-mcp")})})]}),c=window.wp.apiFetch;var i=r.n(c);const l=()=>{const[s,e]=(0,n.useState)([]),[r,d]=(0,n.useState)(!0),[c,l]=(0,n.useState)(null);return(0,n.useEffect)((()=>{(async()=>{try{d(!0);const s=await i()({path:"/wp/v2/wpmcp",method:"POST",data:{jsonrpc:"2.0",method:"tools/list",params:{}}});s&&s.tools?e(s.tools):l((0,t.__)("Failed to load tools data","wordpress-mcp"))}catch(s){l((0,t.__)("Error loading tools: ","wordpress-mcp")+s.message)}finally{d(!1)}})()}),[]),(0,o.jsxs)(a.Card,{children:[(0,o.jsx)(a.CardHeader,{children:(0,o.jsx)("h2",{children:(0,t.__)("Registered Tools","wordpress-mcp")})}),(0,o.jsxs)(a.CardBody,{children:[(0,o.jsx)("p",{children:(0,t.__)("List of all registered tools in the system.","wordpress-mcp")}),r?(0,o.jsxs)("div",{className:"wordpress-mcp-loading",children:[(0,o.jsx)(a.Spinner,{}),(0,o.jsx)("p",{children:(0,t.__)("Loading tools...","wordpress-mcp")})]}):c?(0,o.jsx)("div",{className:"wordpress-mcp-error",children:(0,o.jsx)("p",{children:c})}):0===s.length?(0,o.jsx)("p",{children:(0,t.__)("No tools are currently registered.","wordpress-mcp")}):(0,o.jsxs)("table",{className:"wordpress-mcp-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,t.__)("Name","wordpress-mcp")}),(0,o.jsx)("th",{children:(0,t.__)("Description","wordpress-mcp")})]})}),(0,o.jsx)("tbody",{children:s.map((s=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:s.name})}),(0,o.jsx)("td",{children:s.description})]},s.name)))})]})]})]})},p=s=>{try{if("string"==typeof s)try{const e=JSON.parse(s);return JSON.stringify(e,null,2)}catch(e){return s}if(s&&"object"==typeof s&&s.text&&"string"==typeof s.text)try{const e=JSON.parse(s.text);return JSON.stringify(e,null,2)}catch(s){}return JSON.stringify(s,null,2)}catch(s){return"Error formatting JSON: "+s.message}},m=()=>{const[s,e]=(0,n.useState)([]),[r,d]=(0,n.useState)(!0),[c,l]=(0,n.useState)(null),[m,h]=(0,n.useState)(null),[w,u]=(0,n.useState)(null),[j,x]=(0,n.useState)(!1),[g,_]=(0,n.useState)(null),[v,S]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async()=>{try{d(!0);const s=await i()({path:"/wp/v2/wpmcp",method:"POST",data:{jsonrpc:"2.0",method:"resources/list",params:{}}});s&&s.resources?e(s.resources):l((0,t.__)("Failed to load resources data","wordpress-mcp"))}catch(s){l((0,t.__)("Error loading resources: ","wordpress-mcp")+s.message)}finally{d(!1)}})()}),[]);return(0,o.jsxs)(a.Card,{children:[(0,o.jsx)(a.CardHeader,{children:(0,o.jsx)("h2",{children:(0,t.__)("Available Resources","wordpress-mcp")})}),(0,o.jsxs)(a.CardBody,{children:[(0,o.jsx)("p",{children:(0,t.__)("List of all available resources in the system.","wordpress-mcp")}),r?(0,o.jsxs)("div",{className:"wordpress-mcp-loading",children:[(0,o.jsx)(a.Spinner,{}),(0,o.jsx)("p",{children:(0,t.__)("Loading resources...","wordpress-mcp")})]}):c?(0,o.jsx)("div",{className:"wordpress-mcp-error",children:(0,o.jsx)("p",{children:c})}):0===s.length?(0,o.jsx)("p",{children:(0,t.__)("No resources are currently available.","wordpress-mcp")}):(0,o.jsxs)("table",{className:"wordpress-mcp-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,t.__)("Name","wordpress-mcp")}),(0,o.jsx)("th",{children:(0,t.__)("URI","wordpress-mcp")}),(0,o.jsx)("th",{children:(0,t.__)("Description","wordpress-mcp")}),(0,o.jsx)("th",{children:(0,t.__)("Actions","wordpress-mcp")})]})}),(0,o.jsx)("tbody",{children:s.map((s=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:s.name})}),(0,o.jsx)("td",{children:s.uri}),(0,o.jsx)("td",{children:s.description||"-"}),(0,o.jsx)("td",{children:(0,o.jsx)(a.Button,{variant:"secondary",onClick:()=>(s=>{h(s),(async s=>{try{x(!0),_(null),S(null);const e=await i()({path:"/wp/v2/wpmcp",method:"POST",data:{jsonrpc:"2.0",method:"resources/read",uri:s.uri}});if(e&&e.contents){if(u(e.contents),e.contents.text&&"string"==typeof e.contents.text)try{const s=JSON.parse(e.contents.text);S(s)}catch(s){console.log("Failed to parse JSON text:",s)}}else _((0,t.__)("Failed to load resource details","wordpress-mcp"))}catch(s){_((0,t.__)("Error loading resource details: ","wordpress-mcp")+s.message)}finally{x(!1)}})(s)})(s),children:(0,t.__)("View","wordpress-mcp")})})]},s.name)))})]}),m&&(0,o.jsx)(a.Modal,{title:(0,t.__)("Resource Details","wordpress-mcp"),onRequestClose:()=>{h(null),u(null),S(null),_(null)},className:"wordpress-mcp-resource-modal",children:j?(0,o.jsxs)("div",{className:"wordpress-mcp-loading",children:[(0,o.jsx)(a.Spinner,{}),(0,o.jsx)("p",{children:(0,t.__)("Loading resource details...","wordpress-mcp")})]}):g?(0,o.jsx)("div",{className:"wordpress-mcp-error",children:(0,o.jsx)("p",{children:g})}):w?(0,o.jsxs)("div",{className:"wordpress-mcp-resource-details",children:[(0,o.jsx)("h3",{children:w.name||m.name}),(0,o.jsxs)("div",{className:"wordpress-mcp-resource-json",children:[(0,o.jsx)("h4",{children:(0,t.__)("Full Resource Data","wordpress-mcp")}),(0,o.jsx)("pre",{className:"wordpress-mcp-json-display",children:p(w)})]})]}):(0,o.jsx)("p",{children:(0,t.__)("No details available for this resource.","wordpress-mcp")})})]})]})},h=()=>{const[s,e]=(0,n.useState)([]),[r,d]=(0,n.useState)(!0),[c,l]=(0,n.useState)(null),[p,m]=(0,n.useState)(null),[h,w]=(0,n.useState)(!1),[u,j]=(0,n.useState)(!1),[x,g]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async()=>{try{d(!0);const s=await i()({path:"/wp/v2/wpmcp",method:"POST",data:{jsonrpc:"2.0",method:"prompts/list",params:{}}});s&&s.prompts?e(s.prompts):l((0,t.__)("Failed to load prompts data","wordpress-mcp"))}catch(s){l((0,t.__)("Error loading prompts: ","wordpress-mcp")+s.message)}finally{d(!1)}})()}),[]);const _=()=>{w(!1),m(null),g(null)};return(0,o.jsxs)(a.Card,{children:[(0,o.jsx)(a.CardHeader,{children:(0,o.jsx)("h2",{children:(0,t.__)("Available Prompts","wordpress-mcp")})}),(0,o.jsxs)(a.CardBody,{children:[(0,o.jsx)("p",{children:(0,t.__)("List of all available prompts in the system.","wordpress-mcp")}),r?(0,o.jsxs)("div",{className:"wordpress-mcp-loading",children:[(0,o.jsx)(a.Spinner,{}),(0,o.jsx)("p",{children:(0,t.__)("Loading prompts...","wordpress-mcp")})]}):c?(0,o.jsx)("div",{className:"wordpress-mcp-error",children:(0,o.jsx)("p",{children:c})}):0===s.length?(0,o.jsx)("p",{children:(0,t.__)("No prompts are currently available.","wordpress-mcp")}):(0,o.jsxs)("table",{className:"wordpress-mcp-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,t.__)("Name","wordpress-mcp")}),(0,o.jsx)("th",{children:(0,t.__)("Description","wordpress-mcp")}),(0,o.jsx)("th",{children:(0,t.__)("Actions","wordpress-mcp")})]})}),(0,o.jsx)("tbody",{children:s.map((s=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("strong",{children:s.name})}),(0,o.jsx)("td",{children:s.description||"-"}),(0,o.jsx)("td",{children:(0,o.jsx)(a.Button,{variant:"secondary",onClick:()=>(async s=>{try{j(!0),g(null);const e=await i()({path:"/wp/v2/wpmcp",method:"POST",data:{jsonrpc:"2.0",method:"prompts/get",name:s.name}});if(e&&(e.description||e.messages)){const r={name:s.name,description:e.description||"",content:e.messages&&e.messages.length>0&&e.messages[0].content.text||"",parameters:e.parameters||{}};m(r),w(!0),console.log("Setting showPromptDetails to true",r)}else g((0,t.__)("Failed to load prompt details","wordpress-mcp"))}catch(s){g((0,t.__)("Error loading prompt details: ","wordpress-mcp")+s.message)}finally{j(!1)}})(s),children:(0,t.__)("View","wordpress-mcp")})})]},s.id)))})]}),h&&(0,o.jsxs)(a.Modal,{title:p?p.name:(0,t.__)("Prompt Details","wordpress-mcp"),onRequestClose:_,className:"wordpress-mcp-prompt-modal",children:[u?(0,o.jsxs)("div",{className:"wordpress-mcp-loading",children:[(0,o.jsx)(a.Spinner,{}),(0,o.jsx)("p",{children:(0,t.__)("Loading prompt details...","wordpress-mcp")})]}):x?(0,o.jsx)("div",{className:"wordpress-mcp-error",children:(0,o.jsx)("p",{children:x})}):p?(0,o.jsxs)("div",{className:"wordpress-mcp-prompt-details-content",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:(0,t.__)("Description:","wordpress-mcp")})," ",p.description||(0,t.__)("No description available","wordpress-mcp")]}),p.content&&(0,o.jsxs)("div",{className:"wordpress-mcp-prompt-content",children:[(0,o.jsx)("strong",{children:(0,t.__)("Content:","wordpress-mcp")}),(0,o.jsx)("div",{children:p.content})]}),p.parameters&&(0,o.jsxs)("div",{className:"wordpress-mcp-prompt-parameters",children:[(0,o.jsx)("strong",{children:(0,t.__)("Parameters:","wordpress-mcp")}),(0,o.jsx)("pre",{children:JSON.stringify(p.parameters,null,2)})]})]}):null,(0,o.jsx)("div",{className:"wordpress-mcp-modal-footer",children:(0,o.jsx)(a.Button,{variant:"primary",onClick:_,children:(0,t.__)("Close","wordpress-mcp")})})]})]})]})},w=()=>{const[s,e]=(0,n.useState)({enabled:!1,features_adapter_enabled:!1}),[r,c]=(0,n.useState)(!1),[i,p]=(0,n.useState)(null);(0,n.useEffect)((()=>{window.wordpressMcpSettings&&window.wordpressMcpSettings.settings&&e(window.wordpressMcpSettings.settings)}),[]);const w=s=>{e((e=>({...e,[s]:!e[s]})))},u=()=>{c(!0),p(null);const e=new FormData;e.append("action","wordpress_mcp_save_settings"),e.append("nonce",window.wordpressMcpSettings.nonce),e.append("settings",JSON.stringify(s)),fetch(ajaxurl,{method:"POST",body:e,credentials:"same-origin"}).then((s=>s.json())).then((s=>{c(!1),s.success?p({status:"success",message:s.data.message||window.wordpressMcpSettings.strings.settingsSaved}):p({status:"error",message:s.data.message||window.wordpressMcpSettings.strings.settingsError})})).catch((s=>{c(!1),p({status:"error",message:window.wordpressMcpSettings.strings.settingsError}),console.error("Error saving settings:",s)}))},j=window.wordpressMcpSettings?window.wordpressMcpSettings.strings:{},x=[{name:"settings",title:(0,t.__)("Settings","wordpress-mcp"),className:"wordpress-mcp-settings-tab"},{name:"tools",title:(0,t.__)("Tools","wordpress-mcp"),className:"wordpress-mcp-tools-tab"},{name:"resources",title:(0,t.__)("Resources","wordpress-mcp"),className:"wordpress-mcp-resources-tab"},{name:"prompts",title:(0,t.__)("Prompts","wordpress-mcp"),className:"wordpress-mcp-prompts-tab"}];return(0,o.jsxs)("div",{className:"wordpress-mcp-settings",children:[i&&(0,o.jsx)(a.Notice,{status:i.status,isDismissible:!0,onRemove:()=>p(null),className:`notice notice-${i.status} is-dismissible`,children:i.message}),(0,o.jsx)(a.TabPanel,{className:"wordpress-mcp-tabs",tabs:x,children:e=>{switch(e.name){case"settings":return(0,o.jsx)(d,{settings:s,onToggleChange:w,onSaveSettings:u,isSaving:r,strings:j});case"tools":return(0,o.jsx)(l,{});case"resources":return(0,o.jsx)(m,{});case"prompts":return(0,o.jsx)(h,{});default:return null}}})]})};document.addEventListener("DOMContentLoaded",(function(){const s=document.getElementById("wordpress-mcp-settings-app");s&&(0,n.createRoot)(s).render((0,o.jsx)(w,{}))}))}},r={};function t(s){var n=r[s];if(void 0!==n)return n.exports;var a=r[s]={exports:{}};return e[s](a,a.exports,t),a.exports}t.m=e,s=[],t.O=(e,r,n,a)=>{if(!r){var o=1/0;for(l=0;l<s.length;l++){for(var[r,n,a]=s[l],d=!0,c=0;c<r.length;c++)(!1&a||o>=a)&&Object.keys(t.O).every((s=>t.O[s](r[c])))?r.splice(c--,1):(d=!1,a<o&&(o=a));if(d){s.splice(l--,1);var i=n();void 0!==i&&(e=i)}}return e}a=a||0;for(var l=s.length;l>0&&s[l-1][2]>a;l--)s[l]=s[l-1];s[l]=[r,n,a]},t.n=s=>{var e=s&&s.__esModule?()=>s.default:()=>s;return t.d(e,{a:e}),e},t.d=(s,e)=>{for(var r in e)t.o(e,r)&&!t.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:e[r]})},t.o=(s,e)=>Object.prototype.hasOwnProperty.call(s,e),(()=>{var s={57:0,350:0};t.O.j=e=>0===s[e];var e=(e,r)=>{var n,a,[o,d,c]=r,i=0;if(o.some((e=>0!==s[e]))){for(n in d)t.o(d,n)&&(t.m[n]=d[n]);if(c)var l=c(t)}for(e&&e(r);i<o.length;i++)a=o[i],t.o(s,a)&&s[a]&&s[a][0](),s[a]=0;return t.O(l)},r=globalThis.webpackChunkwordpress_mcp=globalThis.webpackChunkwordpress_mcp||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var n=t.O(void 0,[350],(()=>t(49)));n=t.O(n)})();